<!DOCTYPE html> <html lang="en" dir="auto"> <head><meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=no"> <meta name="description" content="Troubleshooting This section describes common troubleshooting procedures. Additional resources: Upstream document for improving debug experience MT..."> <meta name="revised" content="5c0780b69338e12110ef830cf64ea9376cc6fbec"> <meta name="author" content="Red Hat Communities of Practice"> <meta name="generator" content="jekyll-rtd-theme v2.0.10"><meta name="theme-color" content="#2980b9"> <title>Troubleshooting 路 OpenShift Migration Best Practices</title> <meta name="twitter:title" content="Troubleshooting 路 OpenShift Migration Best Practices"> <meta name="twitter:description" content="Troubleshooting This section describes common troubleshooting procedures. Additional resources: Upstream document for improving debug experience MT..."> <meta name="twitter:card" content="summary"> <meta name="twitter:site" content="@Red Hat Communities of Practice"> <meta name="twitter:url" content="/openshift-migration-best-practices/05-troubleshooting.html"> <meta name="twitter:creator" content="@jekyll-rtd-theme v2.0.10"> <meta property="og:title" content="Troubleshooting 路 OpenShift Migration Best Practices"> <meta property="og:description" content="Troubleshooting This section describes common troubleshooting procedures. Additional resources: Upstream document for improving debug experience MT..."> <meta property="og:locale" content="en"> <meta property="og:url" content="/openshift-migration-best-practices/05-troubleshooting.html"> <meta property="og:type" content="article"> <meta property="article:author" content="Red Hat Communities of Practice"> <meta property="article:published_time" content="2020-08-20T10:18:51-05:00"> <meta property="article:modified_time" content="2021-08-02T19:33:25-05:00"> <script type="application/ld+json"> { "@context": "https://schema.org", "@type": "Article", "mainEntityOfPage": { "@type": "WebPage", "@id": "/openshift-migration-best-practices/05-troubleshooting.html" }, "headline": "Troubleshooting 路 OpenShift Migration Best Practices", "image": [], "author": { "@type": "Person", "name": "Red Hat Communities of Practice" }, "datePublished": "2020-08-20T10:18:51-05:00", "dateModified": "2021-08-02T19:33:25-05:00", "publisher": { "@type": "Organization", "name": "Red Hat Communities of Practice", "logo": { "@type": "ImageObject", "url": "https://avatars.githubusercontent.com/u/21339385?v=4" } }, "description": "Troubleshooting This section describes common troubleshooting procedures. Additional resources: Upstream document for improving debug experience MT..." } </script> <link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="prev" href="/openshift-migration-best-practices/04-running-the-migration.html"><link rel="next" href="/openshift-migration-best-practices/06-post-migration-considerations.html"><link rel="canonical" href="/openshift-migration-best-practices/05-troubleshooting.html"><link rel="icon" type="image/svg+xml" href="/openshift-migration-best-practices/assets/images/favicon.svg"><link rel="icon" type="image/png" href="/openshift-migration-best-practices/assets/images/favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="/openshift-migration-best-practices/assets/images/favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="/openshift-migration-best-practices/assets/images/favicon-96x96.png" sizes="96x96"><link rel="mask-icon" href="/openshift-migration-best-practices/assets/images/favicon.svg" color="#2980b9"><link rel="apple-touch-icon" href="/openshift-migration-best-practices/assets/images/apple-touch-icon-300x300.jpg"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@2.0.10/assets/css/theme.min.css"><script> window.ui = { title: "OpenShift Migration Best Practices", baseurl: "/openshift-migration-best-practices", i18n: { search_results: "Search Results", search_results_found: "Search finished, found # page(s) matching the search query.", search_results_not_found: "Your search did not match any documents, please make sure that all characters are spelled correctly!" } }; </script> </head> <body class="container"><div class="sidebar-wrap overflow-hidden"> <div class="sidebar height-full overflow-y-scroll overflow-x-hidden"> <div class="header d-flex flex-column p-3 text-center"> <div class="title pb-1"> <a class="h4 no-underline py-1 px-2 rounded-1" href="/openshift-migration-best-practices/" title="Best practices for migrating from OpenShift 3 to 4"> <i class="fa fa-home"></i> OpenShift Migration Best Practices </a> </div> <span class="version"></span> <form class="search pt-2" action="/openshift-migration-best-practices/search.html" method="get" autocomplete="off"> <input class="form-control input-block input-sm" type="text" name="q" placeholder="Search docs..."> </form> </div> <div class="toctree py-2" data-spy="affix" role="navigation" aria-label="main navigation"> <ul> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/openshift-migration-best-practices/01-planning.html">Planning</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/openshift-migration-best-practices/02-cluster-health-checks.html">Cluster health checks</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/openshift-migration-best-practices/03-pre-migration-testing.html">Premigration testing</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/openshift-migration-best-practices/04-running-the-migration.html">Running the migration</a> </li> <li class="toc level-1 current" data-sort="" data-level="1"> <a class="d-flex flex-items-baseline current" href="/openshift-migration-best-practices/05-troubleshooting.html">Troubleshooting</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/openshift-migration-best-practices/06-post-migration-considerations.html">Postmigration considerations</a> </li> </ul> </div> </div> </div> <div class="content-wrap"> <div class="header d-flex flex-justify-between p-2 hide-lg hide-xl" aria-label="top navigation"> <button id="toggle" aria-label="Toggle menu" class="btn-octicon p-2 m-0 text-white" type="button"> <i class="fa fa-bars"></i> </button> <div class="title flex-1 d-flex flex-justify-center"> <a class="h4 no-underline py-1 px-2 rounded-1" href="/openshift-migration-best-practices/">OpenShift Migration Best Practices</a> </div> </div> <div class="content p-3 p-sm-5"> <div class="navigation-top d-flex flex-justify-between"> <ul class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation"> <li class="breadcrumb-item"> <a class="no-underline" href="/openshift-migration-best-practices/" title="/"> <i class="fa fa-home"></i> </a> </li><li class="breadcrumb-item" aria-current="page">05-troubleshooting.md</li></ul> </a> </div> <hr> <div role="main" itemscope="itemscope" itemtype="https://schema.org/Article"> <div class="markdown-body" itemprop="articleBody"> <h1 id="troubleshooting">Troubleshooting</h1> <p>This section describes common troubleshooting procedures.</p> <p>Additional resources:</p> <ul> <li><a href="https://github.com/konveyor/enhancements/tree/master/enhancements/debug">Upstream document</a> for improving debug experience</li> <li><a href="https://app.lucidchart.com/documents/view/d0907ce1-ccf1-4226-86eb-e5332f9d42a4/0_0">MTC Debug flowchart</a> (in progress)</li> </ul> <h2 id="debugging-mtc-resources">Debugging MTC resources</h2> <h3 id="mtc-custom-resources">MTC custom resources</h3> <p>The following diagram describes the MTC debug flow.</p> <p><img src="./images/mtc-1.4.z-debugging-guide.jpeg" alt="Debug flow" /></p> <p>The following diagram describes the MTC custom resources (CRs). Each object is a standard Kubernetes CR.</p> <p>You can manage the MTC resources with the standard create, read, update, and delete operations using the <code class="language-plaintext highlighter-rouge notranslate">kubectl</code> and <code class="language-plaintext highlighter-rouge notranslate">oc</code> clients or directly, using the web interface.</p> <!-- TODO: Need to update diagram with MigAnalytic and MigHook --> <p><img src="./images/CRDArch.png" alt="CRD Architecture" /></p> <h3 id="debugging-mtc-resources-using-the-web-console">Debugging MTC resources using the web console</h3> <p>You can view the resources of a migration plan in the MTC web console:</p> <ol> <li> <p>Click the <strong>Options</strong> menu next to a migration plan and select <strong>View migration plan resources</strong>.</p> <p>The migration plan resources are displayed as a tree.</p> </li> <li> <p>Click the arrow of a <strong>Backup</strong> or <strong>Restore</strong> resource to view its pods.</p> </li> <li> <p>Click the <strong>Copy</strong> button of a pod to copy the <code class="language-plaintext highlighter-rouge notranslate">oc get</code> command to your clipboard and paste the command on the command line.</p> </li> <li> <p>Click <strong>View Raw</strong> to inspect a pod.</p> <p>The resource is displayed in JSON format.</p> </li> </ol> <p><img src="./images/ResourceDebugKebabOption.png" alt="Resource Debug Kebab Option" /></p> <p><img src="./images/DebugTree.png" alt="Debug Tree UI" /></p> <p>Usually the objects that you should examine depend on the stage at which the migration failed. The <a href="https://app.lucidchart.com/documents/view/d0907ce1-ccf1-4226-86eb-e5332f9d42a4/0_0">MTC debug flowchart</a> provides information about which resources are relevant, depending on this failure stage.</p> <p><strong>Stage migrations</strong> have one <code class="language-plaintext highlighter-rouge notranslate">Backup</code> and one <code class="language-plaintext highlighter-rouge notranslate">Restore</code> resource.</p> <p><strong>Final migrations</strong> have two <code class="language-plaintext highlighter-rouge notranslate">Backup</code> and two <code class="language-plaintext highlighter-rouge notranslate">Restore</code> resources. The first <code class="language-plaintext highlighter-rouge notranslate">Backup</code> resource captures the original, unaltered state of the application and its Kubernetes objects. This <code class="language-plaintext highlighter-rouge notranslate">Backup</code> is the source of truth.</p> <p>Then, the application is quiesced and a second <code class="language-plaintext highlighter-rouge notranslate">Backup</code> captures the storage-related resources (PVs, PVCs, data).</p> <p>The first <code class="language-plaintext highlighter-rouge notranslate">Restore</code> restores these storage objects on the target cluster. The final <code class="language-plaintext highlighter-rouge notranslate">Restore</code> restores the original application <code class="language-plaintext highlighter-rouge notranslate">Backup</code> to the target cluster.</p> <h3 id="debugging-migration-resources-from-the-command-line">Debugging migration resources from the command line</h3> <p>You can view the migration debug tree and query specific label selectors.</p> <ul> <li>To view all <code class="language-plaintext highlighter-rouge notranslate">migmigration</code> resources associated with the <code class="language-plaintext highlighter-rouge notranslate">test</code> migration plan: <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc get migmigration <span class="nt">-l</span> <span class="s1">'migration.openshift.io/migplan-name=test'</span>
</code></pre>  </div> </div> <p><strong>Example output</strong></p> <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>NAME                                  READY  PLAN  STAGE  ITINERARY  PHASE
09a8bf20-fdc5-11ea-a447-cb5249018d21         <span class="nb">test  false  </span>Final      Completed
</code></pre>  </div> </div> <p>The columns display the associated plan name, itinerary step, and phase.</p> </li> <li>To view all completed <code class="language-plaintext highlighter-rouge notranslate">migmigration</code> resources associated with the <code class="language-plaintext highlighter-rouge notranslate">test</code> migration plan: <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc get migmigration <span class="nt">-l</span> <span class="s1">'migration.openshift.io/migplan-name=test'</span> <span class="nt">-o</span><span class="se">\</span>
go-template-file<span class="o">=</span>./go-cli-templates/migmigration-completed-list.template
</code></pre>  </div> </div> <p><strong>Example output</strong></p> <div class="language-yaml highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="na">Name</span><span class="pi">:</span>       <span class="s">51886050-6d52-11eb-98e7-b515603f1bc7</span>
<span class="na">Migplan</span><span class="pi">:</span>    <span class="s">test</span>
<span class="na">Result</span><span class="pi">:</span>     <span class="s">SucceededWithWarnings</span>

<span class="na">Name</span><span class="pi">:</span>       <span class="s">b4d045f0-6d58-11eb-98e7-b515603f1bc7</span>
<span class="na">Migplan</span><span class="pi">:</span>    <span class="s">test</span>
<span class="na">Result</span><span class="pi">:</span>     <span class="s">SucceededWithWarnings</span>
</code></pre>  </div> </div> <p>The <code class="language-plaintext highlighter-rouge notranslate">Result</code> parameter indicates a status of <code class="language-plaintext highlighter-rouge notranslate">Succeeded</code>, <code class="language-plaintext highlighter-rouge notranslate">SucceededWithWarnings</code>, or <code class="language-plaintext highlighter-rouge notranslate">Failed</code>.</p> </li> <li>To view the warnings of all completed <code class="language-plaintext highlighter-rouge notranslate">migmigration</code> resources associated with the <code class="language-plaintext highlighter-rouge notranslate">test</code> migration plan: <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc get migmigration <span class="nt">-l</span> <span class="s1">'migration.openshift.io/migplan-name=test'</span> <span class="nt">-o</span> <span class="se">\</span>
go-template-file<span class="o">=</span>go-cli-templates/migmigration-display-warning-list.template
</code></pre>  </div> </div> <p><strong>Example output</strong></p> <div class="language-yaml highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="na">Name</span><span class="pi">:</span>       <span class="s">51886050-6d52-11eb-98e7-b515603f1bc7</span>
<span class="na">Migplan</span><span class="pi">:</span>    <span class="s">test</span>
<span class="na">Warning</span><span class="pi">:</span>    <span class="s">DirectVolumeMigrationFailed</span>
    <span class="s">Message</span><span class="pi">:</span>        <span class="s">DirectVolumeMigration (dvm)</span><span class="pi">:</span> <span class="s">openshift-migration/51886050-6d52-11eb-98e7-b515603f1bc7-z9zfj failed. See in dvm status.Errors</span>
<span class="na">errors</span><span class="pi">:</span>     <span class="s">&lt;no value&gt;</span>

<span class="na">Name</span><span class="pi">:</span>       <span class="s">b4d045f0-6d58-11eb-98e7-b515603f1bc7</span>
<span class="na">Migplan</span><span class="pi">:</span>    <span class="s">test</span>
<span class="na">Warning</span><span class="pi">:</span>    <span class="s">DirectVolumeMigrationFailed</span>
    <span class="s">Message</span><span class="pi">:</span>        <span class="s">DirectVolumeMigration (dvm)</span><span class="pi">:</span> <span class="s">openshift-migration/b4d045f0-6d58-11eb-98e7-b515603f1bc7-4c894 failed. See in dvm status.Errors</span>
<span class="na">errors</span><span class="pi">:</span>     <span class="s">&lt;no value&gt;</span>
</code></pre>  </div> </div> </li> <li>To list all <code class="language-plaintext highlighter-rouge notranslate">Backup</code> resources: <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc get backup <span class="nt">-n</span> openshift-migration
</code></pre>  </div> </div> <p><strong>Example output</strong></p> <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>NAME                                   AGE
88435fe0-c9f8-11e9-85e6-5d593ce65e10   6m42s
</code></pre>  </div> </div> <p>You can use the same command to view <code class="language-plaintext highlighter-rouge notranslate">Restore</code> resources.</p> </li> <li>To inspect a <code class="language-plaintext highlighter-rouge notranslate">Backup</code> resource: <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc describe backup 88435fe0-c9f8-11e9-85e6-5d593ce65e10 <span class="nt">-n</span> openshift-migration
</code></pre>  </div> </div> </li> <li>To list failed migrations caused by direct volume migration failures: <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc get dvm <span class="nt">-l</span> <span class="nv">migmigration</span><span class="o">=</span>&lt;uid&gt;
</code></pre>  </div> </div> <p><strong>Example Output</strong></p> <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>NAME                                         AGE
b4d045f0-6d58-11eb-98e7-b515603f1bc7-4c894   5d21h
</code></pre>  </div> </div> </li> <li>To list the direct volume migration failures and their causes: <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc get dvm <span class="nt">-l</span> <span class="nv">migmigration</span><span class="o">=</span>&lt;uid&gt; <span class="se">\</span>
<span class="nt">-o</span> go-template-file<span class="o">=</span>go-cli-templates/dvm-display-failure-list.template
</code></pre>  </div> </div> <p><strong>Example Output</strong></p> <div class="language-yaml highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="na">Name</span><span class="pi">:</span>       <span class="s">b4d045f0-6d58-11eb-98e7-b515603f1bc7-4c894</span>

    <span class="s">State</span><span class="pi">:</span>  <span class="s">Failed</span>
    <span class="s">Phase</span><span class="pi">:</span>  <span class="s">WaitForRsyncClientPodsCompleted</span>
    <span class="s">Message</span><span class="pi">:</span>        <span class="s">The migration has failed.  See</span><span class="pi">:</span> <span class="s">Errors.</span>

<span class="na">errors</span><span class="pi">:</span>     <span class="pi">[</span><span class="nv">One or more pods are in error state</span><span class="pi">]</span>
</code></pre>  </div> </div> </li> </ul> <p>See <a href="https://docs.openshift.com/container-platform/4.7/migration/migrating_3_4/troubleshooting-3-4.html#migration-viewing-migration-crs_migrating-3-4">Viewing migration custom resources</a> for more information.</p> <h2 id="debugging-backup-and-restore-resources-with-the-velero-cli">Debugging <code class="language-plaintext highlighter-rouge notranslate">backup</code> and <code class="language-plaintext highlighter-rouge notranslate">restore</code> resources with the Velero CLI</h2> <p>You can debug <code class="language-plaintext highlighter-rouge notranslate">backup</code> and <code class="language-plaintext highlighter-rouge notranslate">restore</code> resources with the Velero command line interface (CLI). The Velero CLI is included in the <code class="language-plaintext highlighter-rouge notranslate">velero</code> pod.</p> <p>Velero CLI examines lower-level information in the object storage associated with a <code class="language-plaintext highlighter-rouge notranslate">Backup</code> or <code class="language-plaintext highlighter-rouge notranslate">Restore</code> resource. This information can reveal why a resource was not restored or why a Velero operation failed.</p> <h3 id="velero-cli-commands">Velero CLI commands</h3> <h4 id="syntax">Syntax</h4> <p>Velero CLI commands use the following syntax:</p> <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc <span class="nb">exec</span> <span class="si">$(</span>oc get pods <span class="nt">-n</span> openshift-migration <span class="nt">-o</span> name | <span class="nb">grep </span>velero<span class="si">)</span> <span class="nt">--</span> ./velero &lt;resource&gt; &lt;<span class="nb">command</span><span class="o">&gt;</span> &lt;resource_id&gt;
</code></pre>  </div></div> <blockquote> <p>You can specify <code class="language-plaintext highlighter-rouge notranslate">velero-&lt;pod&gt; -n openshift-migration</code> in place of <code class="language-plaintext highlighter-rouge notranslate">$(oc get pods -n openshift-migration -o name | grep velero)</code>.</p> </blockquote> <p>For a full list of commands, run <code class="language-plaintext highlighter-rouge notranslate">velero --help</code>:</p> <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc <span class="nb">exec</span> <span class="si">$(</span>oc get pods <span class="nt">-n</span> openshift-migration <span class="nt">-o</span> name | <span class="nb">grep </span>velero<span class="si">)</span> <span class="nt">--</span> ./velero <span class="nt">--help</span>
</code></pre>  </div></div> <h4 id="velero-describe-command">Velero <code class="language-plaintext highlighter-rouge notranslate">describe</code> command</h4> <p>The <code class="language-plaintext highlighter-rouge notranslate">describe</code> command provides a summary of warnings and errors associated with a Velero resource:</p> <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>velero &lt;resource&gt; describe &lt;resource_id&gt;
</code></pre>  </div></div> <p><strong>Example</strong></p> <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc <span class="nb">exec</span> <span class="si">$(</span>oc get pods <span class="nt">-n</span> openshift-migration <span class="nt">-o</span> name | <span class="nb">grep </span>velero<span class="si">)</span> <span class="nt">--</span> ./velero backup describe 0e44ae00-5dc3-11eb-9ca8-df7e5254778b-2d8ql
</code></pre>  </div></div> <h4 id="velero-logs-command">Velero <code class="language-plaintext highlighter-rouge notranslate">logs</code> command</h4> <p>The <code class="language-plaintext highlighter-rouge notranslate">logs</code> command provides a lower level output of the logs associated with a Velero resource:</p> <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>velero &lt;resource&gt; logs &lt;resource_id&gt;
</code></pre>  </div></div> <p><strong>Example</strong></p> <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc <span class="nb">exec</span> <span class="si">$(</span>oc get pods <span class="nt">-n</span> openshift-migration <span class="nt">-o</span> name | <span class="nb">grep </span>velero<span class="si">)</span> <span class="nt">--</span> ./velero restore logs ccc7c2d0-6017-11eb-afab-85d0007f5a19-x4lbf
</code></pre>  </div></div> <h3 id="debugging-a-partial-failure-with-the-velero-logs-command">Debugging a partial failure with the Velero <code class="language-plaintext highlighter-rouge notranslate">logs</code> command</h3> <p>You can debug a partial failure by using the Velero <code class="language-plaintext highlighter-rouge notranslate">logs</code> command to examine the <code class="language-plaintext highlighter-rouge notranslate">restore</code> logs. A partial failure occurs when Velero encounters an issue but the issue does not cause a migration to fail.</p> <p>For example, if a custom resource (CR) cannot be restored because the custom resource definition (CRD) is missing or is a different version on the target cluster, Velero logs the issue and then processes the rest of the objects in the <code class="language-plaintext highlighter-rouge notranslate">Backup</code> resource.</p> <blockquote> <p>In the future, Velero error reporting will be improved. See <a href="https://issues.redhat.com/browse/MIG-353">MIG-353: Enhance Velero error reporting so problems that cause partial failures (and even full failures) are more visible in structured way</a></p> </blockquote> <p><strong>Debug example</strong></p> <p>The following example describes how to debug a partially failed <code class="language-plaintext highlighter-rouge notranslate">restore</code> caused by GVK incompatibility. The CRD version on the source cluster differs from the CRD version on the target cluster. See the <a href="https://github.com/pranavgaikwad/mtc-breakfix/tree/master/03-Gvk">GVK incompatibility exercise</a> for details.</p> <ol> <li>Obtain the <code class="language-plaintext highlighter-rouge notranslate">MigMigration</code> instance associated with the partial failure: <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code> oc get migmigration ccc7c2d0-6017-11eb-afab-85d0007f5a19 <span class="nt">-o</span> yaml
</code></pre>  </div> </div> <p><strong>Example output</strong></p> <div class="language-yml highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code> <span class="na">status</span><span class="pi">:</span>
   <span class="na">conditions</span><span class="pi">:</span>
   <span class="pi">-</span> <span class="na">category</span><span class="pi">:</span> <span class="s">Warn</span>
     <span class="na">durable</span><span class="pi">:</span> <span class="no">true</span>
     <span class="na">lastTransitionTime</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2021-01-26T20:48:40Z"</span>
     <span class="na">message</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Final</span><span class="nv"> </span><span class="s">Restore</span><span class="nv"> </span><span class="s">openshift-migration/ccc7c2d0-6017-11eb-afab-85d0007f5a19-x4lbf:</span><span class="nv"> </span><span class="s">partially</span><span class="nv"> </span><span class="s">failed</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">destination</span><span class="nv"> </span><span class="s">cluster'</span>
     <span class="na">status</span><span class="pi">:</span> <span class="s2">"</span><span class="s">True"</span>
     <span class="na">type</span><span class="pi">:</span> <span class="s">VeleroFinalRestorePartiallyFailed</span>
   <span class="pi">-</span> <span class="na">category</span><span class="pi">:</span> <span class="s">Advisory</span>
     <span class="na">durable</span><span class="pi">:</span> <span class="no">true</span>
     <span class="na">lastTransitionTime</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2021-01-26T20:48:42Z"</span>
     <span class="na">message</span><span class="pi">:</span> <span class="s">The migration has completed with warnings, please look at `Warn` conditions.</span>
     <span class="na">reason</span><span class="pi">:</span> <span class="s">Completed</span>
     <span class="na">status</span><span class="pi">:</span> <span class="s2">"</span><span class="s">True"</span>
     <span class="na">type</span><span class="pi">:</span> <span class="s">SucceededWithWarnings</span>
</code></pre>  </div> </div> <p><a href="https://gist.github.com/jwmatthews/001ff42bf5e712ba2eab92df306ed34e">Full output</a></p> </li> <li>Check the status of the <code class="language-plaintext highlighter-rouge notranslate">restore</code> resource by running the <code class="language-plaintext highlighter-rouge notranslate">describe</code> command: <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>oc <span class="nb">exec</span> <span class="si">$(</span>oc get pods <span class="nt">-n</span> openshift-migration <span class="nt">-o</span> name | <span class="nb">grep </span>velero<span class="si">)</span> <span class="nt">-n</span> openshift-migration <span class="nt">--</span> ./velero restore describe ccc7c2d0-6017-11eb-afab-85d0007f5a19-x4lbf
</code></pre>  </div> </div> <p><strong>Example output</strong></p> <div class="language-yml highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code> <span class="na">Phase</span><span class="pi">:</span>  <span class="s">PartiallyFailed (run 'velero restore logs ccc7c2d0-6017-11eb-afab-85d0007f5a19-x4lbf' for more information)</span>

 <span class="na">Errors</span><span class="pi">:</span>
   <span class="na">Velero</span><span class="pi">:</span>     <span class="s">&lt;none&gt;</span>
   <span class="na">Cluster</span><span class="pi">:</span>    <span class="s">&lt;none&gt;</span>
   <span class="na">Namespaces</span><span class="pi">:</span>
     <span class="na">gvk-demo</span><span class="pi">:</span>  <span class="s">error restoring gvkdemoes.konveyor.openshift.io/gvk-demo/gvk-demo</span><span class="pi">:</span> <span class="s">the server could not find the requested resource</span>
</code></pre>  </div> </div> <p><a href="https://gist.github.com/9a3ec8f51e12b84f8bb995286223bdda">Full output</a></p> </li> <li>Check the <code class="language-plaintext highlighter-rouge notranslate">restore</code> logs by running the <code class="language-plaintext highlighter-rouge notranslate">logs</code> command: <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>oc <span class="nb">exec</span> <span class="si">$(</span>oc get pods <span class="nt">-n</span> openshift-migration <span class="nt">-o</span> name | <span class="nb">grep </span>velero<span class="si">)</span> <span class="nt">-n</span> openshift-migration <span class="nt">--</span> ./velero restore logs ccc7c2d0-6017-11eb-afab-85d0007f5a19-x4lbf
</code></pre>  </div> </div> <p><strong>Example output</strong></p> <div class="language-yml highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code> <span class="s">time="2021-01-26T20:48:37Z" level=info msg="Attempting to restore GvkDemo</span><span class="pi">:</span> <span class="s">gvk-demo" logSource="pkg/restore/restore.go:1107" restore=openshift-migration/ccc7c2d0-6017-11eb-afab-85d0007f5a19-x4lbf</span>
 <span class="s">time="2021-01-26T20:48:37Z" level=info msg="error restoring gvk-demo</span><span class="pi">:</span> <span class="s">the server could not find the requested resource" logSource="pkg/restore/restore.go:1170" restore=openshift-migration/ccc7c2d0-6017-11eb-afab-85d0007f5a19-x4lbf</span>
</code></pre>  </div> </div> <p><a href="https://gist.github.com/jwmatthews/7dc7ed9eb0c4d0611f30675074b9b7d7">Full output</a></p> <p>The <code class="language-plaintext highlighter-rouge notranslate">restore</code> log error message, <code class="language-plaintext highlighter-rouge notranslate">the server could not find the requested resource</code>, indicates the cause of the partially failed migration.</p> </li> </ol> <h2 id="error-messages">Error messages</h2> <h3 id="ca-certificate-error-when-logging-in-to-the-mtc-console-for-the-first-time">CA certificate error when logging in to the MTC console for the first time</h3> <p>The following error message might appear when you log in to the MTC console for the first time:</p> <div class="language-plaintext highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>A certificate error has occurred, likely caused by using self-signed CA certificates in one of the clusters. Navigate to the following URL and accept the certificate:
`https://www.example.com:6443/.well-known/oauth-authorization-server`.

If an "Unauthorized" message appears after you have accepted the certificate, refresh the web page.

To fix this issue permanently, add the certificate to your web browser's trust store.
</code></pre>  </div></div> <p>Possible causes are self-signed certificates or network access issues.</p> <p>Self-signed CA certificates:</p> <ul> <li>You can navigate to the <code class="language-plaintext highlighter-rouge notranslate">oauth-authorization-server</code> URL and accept the certificate.</li> <li>You can add self-signed certificates for the API server, OAuth server, and routes to your web browser's trusted store.</li> </ul> <p>Network access:</p> <ul> <li>You can inspect the elements of the MTC console with your browser's web inspector to view the network connections.</li> <li> <p>MTC 1.3.1 and earlier: The MTC console performs OAuth authentication on the client side.</p> <p>The console requires uninterrupted network access to the API server and the OAuth server.</p> </li> <li> <p>MTC 1.3.2 and later: OAuth authentication is performed on the backend.</p> <p>The console requires uninterrupted network access to the Node.js server, which provides the JavaScript bundle and performs OAuth authentication, and the API server. See <a href="https://bugzilla.redhat.com/show_bug.cgi?id=1878824">BZ#1878824</a>.</p> </li> </ul> <h3 id="connection-time-out-after-accepting-ca-certificate">Connection time-out after accepting CA certificate</h3> <p>If you acce[t] a self-signed certificate and a blank page appears, followed by a <code class="language-plaintext highlighter-rouge notranslate">Connection has timed out</code> message, the likely cause is a web proxy blocking access to the OAuth server.</p> <p>Configure the web proxy configuration to allow access to the <code class="language-plaintext highlighter-rouge notranslate">oauth-authorization-server</code> URL. See <a href="https://bugzilla.redhat.com/show_bug.cgi?id=1890675">BZ#1890675</a>.</p> <h2 id="using-must-gather">Using <code class="language-plaintext highlighter-rouge notranslate">must-gather</code></h2> <p>You can use the <code class="language-plaintext highlighter-rouge notranslate">must-gather</code> tool to collect information for troubleshooting or for opening a customer support case on the <a href="https://access.redhat.com/">Red Hat Customer Portal</a>. The <code class="language-plaintext highlighter-rouge notranslate">openshift-migration-must-gather-rhel8</code> image collects migration-specific logs and Custom Resource data that are not collected by the default <code class="language-plaintext highlighter-rouge notranslate">must-gather</code> image.</p> <p>Run the <code class="language-plaintext highlighter-rouge notranslate">must-gather</code> command on your cluster:</p> <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc adm must-gather <span class="nt">--image</span><span class="o">=</span>openshift-migration-must-gather-rhel8:v1.3.0
</code></pre>  </div></div> <p>The <code class="language-plaintext highlighter-rouge notranslate">must-gather</code> tool generates a local directory that contains the collected data.</p> <h2 id="direct-volume-migration-fails-to-complete">Direct volume migration fails to complete</h2> <p>For direct volume migrations, we create a few dependencies:</p> <ol> <li>Transfer pod on the destination cluster in target namespace. This pod has rsync daemon container and stunnel container</li> <li>Stunnel service on the destination cluster in target namespace, this creates the networking presence for the stunnel container in kubernetes</li> <li>Stunnel route on the destination cluster in target namespace, this creates a route to be exposed on the internet</li> <li>Stunnel pod on the source cluster in source namespace, this connects to the target stunnel container in transfer pod through stunnel route on the target namespace</li> <li>Rsync client pods on the source cluster in source namespace, this runs the actual rsync command for moving the PVC data.</li> </ol> <p>If direct volume migration fails to complete, it could be one of the following buckets of errors:</p> <ol> <li> <p>Error in creating dependencies: If creating any of the above dependencies fails, it could lead to a failure. The error message will be present in DVM status and in the errors fields. Use the dvm failure list command to find this.</p> </li> <li> <p>Stuck in waiting for dependencies to be healthy: It could be the case that the pods on either source or destination is not running or the route is not admitted. In both these cases, DVM is hang until the pod is running or route is admitted. When the pods are stuck in a non-healthy state, you will find a Warning in 10 mins of DVM being stuck here. Use the dvm command to see warning on the dvm status</p> </li> <li> <p>Rsync exits with error: this happens when all the dependencies are met and healthy and the rysnc fail because of some reason. The dvm controller does not clean up the failed rsync client pods so the logs can be inspected.</p> </li> </ol> <h4 id="example-of-debugging-with-dependency-pod-in-pending-state">Example of debugging with dependency pod in pending state:</h4> <p>A very likely cause of direct volume migration failing to complete is the Rsync transfer pods on the target cluster remain in a <code class="language-plaintext highlighter-rouge notranslate">Pending</code> state.</p> <p>MTC migrates namespaces with all annotations in order to preserve security context constraints and scheduling requirements. During direct volume migration, MTC creates Rsync transfer pods on the target cluster in the namespaces that were migrated from the source cluster. If the target cluster does not have the same node labels as the source cluster, the Rsync transfer pods cannot be scheduled.</p> <p>You can check the <code class="language-plaintext highlighter-rouge notranslate">migmigration</code> CR status:</p> <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc describe migmigration 88435fe0-c9f8-11e9-85e6-5d593ce65e10 <span class="nt">-n</span> openshift-migration
</code></pre>  </div></div> <p>The output displays the following <code class="language-plaintext highlighter-rouge notranslate">status</code> message:</p> <div class="language-plaintext highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>Some or all transfer pods are not running for more than 10 mins on destination cluster
</code></pre>  </div></div> <p>To resolve this issue, perform the following steps:</p> <ol> <li>Obtain the value of the <code class="language-plaintext highlighter-rouge notranslate">openshift.io/node-selector</code> annotation of the migrated namespaces on the source cluster: <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc get namespace <span class="nt">-o</span> yaml
</code></pre>  </div> </div> </li> <li>Add the <code class="language-plaintext highlighter-rouge notranslate">openshift.io/node-selector</code> annotation to each migrated namespace on the target cluster: <div class="language-yml highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Namespace</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">annotations</span><span class="pi">:</span>
<span class="err"> </span><span class="s">openshift.io/node-selector</span><span class="pi">:</span> <span class="s2">"</span><span class="s">region=east"</span>
<span class="nn">...</span>
</code></pre>  </div> </div> </li> <li>Re-run the migration plan.</li> </ol> <h2 id="previewing-metrics-on-local-prometheus-server">Previewing metrics on local Prometheus server</h2> <p>You can use <code class="language-plaintext highlighter-rouge notranslate">must-gather</code> to create a metrics data directory dump from the last day:</p> <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc adm must-gather <span class="nt">--image</span> quay.io/konveyor/must-gather:latest <span class="nt">--</span> /usr/bin/gather_metrics_dump
</code></pre>  </div></div> <p>You can view the data with a <a href="https://github.com/konveyor/must-gather#preview-metrics-on-local-prometheus-server">local Prometheus instance</a>.</p> <h2 id="performance-metrics">Performance metrics</h2> <p>For information about the metrics recorded by the MTC controller, see the <a href="https://github.com/konveyor/mig-operator/blob/master/docs/usage/Metrics.md#accessing-mig-controller-prometheus-metrics"><code class="language-plaintext highlighter-rouge notranslate">mig-operator</code> documentation</a>.</p> <p>This documentation includes <a href="https://github.com/konveyor/mig-operator/blob/master/docs/usage/Metrics.md#useful-queries">useful queries</a> for performance monitoring.</p> <h2 id="cleaning-up-a-failed-migration">Cleaning up a failed migration</h2> <h3 id="deleting-resources">Deleting resources</h3> <p>Ensure that stage pods are cleaned up. If a migration fails during stage or copy, the stage pods are retained to allow debugging. Before retrying a migration, you must delete the stage pods manually.</p> <h3 id="unquiescing-an-application">Unquiescing an application</h3> <p>If your application was quiesced during migration, you should <code class="language-plaintext highlighter-rouge notranslate">unquiesce</code> it by scaling it back to its initial replica count.</p> <p>This can be done manually by editing the deployment primitive (<code class="language-plaintext highlighter-rouge notranslate">Deployment</code>, <code class="language-plaintext highlighter-rouge notranslate">DeploymentConfig</code>, etc.) and setting the <code class="language-plaintext highlighter-rouge notranslate">spec.replicas</code> field back to its original, non-zero value:</p> <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc edit deployment &lt;deployment_name&gt;
</code></pre>  </div></div> <p>Alternatively, you can scale your deployment with the <code class="language-plaintext highlighter-rouge notranslate">oc scale</code> command:</p> <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc scale deployment &lt;deployment_name&gt; <span class="nt">--replicas</span><span class="o">=</span>&lt;desired_replicas&gt;
</code></pre>  </div></div> <h3 id="labels-for-premigration-settings">Labels for premigration settings</h3> <p>When a source application is quiesced during migration, MTC adds a label indicating the original replica count to the <code class="language-plaintext highlighter-rouge notranslate">deployment</code> resource:</p> <div class="language-yaml highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">extensions/v1beta1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Deployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">annotations</span><span class="pi">:</span>
    <span class="s">deployment.kubernetes.io/revision</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1"</span>
    <span class="s">migration.openshift.io/preQuiesceReplicas</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1"</span>
</code></pre>  </div></div> <h3 id="deleting-the-mtc-operator-and-resources">Deleting the MTC Operator and resources</h3> <p>The following procedure removes the MTC Operator and cluster-scoped resources:</p> <ol> <li> <p>Delete the Migration Controller and its resources:</p> <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc delete migrationcontroller &lt;resource_name&gt;
</code></pre>  </div> </div> <p>Wait for the MTC Operator to finish deleting the resources.</p> </li> <li> <p>Uninstall the MTC Operator:</p> <ul> <li>OpenShift 4: Uninstall the Operator in the <a href="https://docs.openshift.com/container-platform/4.7/operators/olm-deleting-operators-from-cluster.html">web console</a> or by running the following command:</li> </ul> <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc delete ns openshift-migration
</code></pre>  </div> </div> <ul> <li>OpenShift 3: Uninstall the operator by deleting it: <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc delete <span class="nt">-f</span> operator.yml
</code></pre>  </div> </div> </li> </ul> </li> <li> <p>Delete the cluster-scoped resources:</p> <ul> <li>Migration custom resource definition: <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc delete <span class="si">$(</span>oc get crds <span class="nt">-o</span> name | <span class="nb">grep</span> <span class="s1">'migration.openshift.io'</span><span class="si">)</span>
</code></pre>  </div> </div> </li> <li>Velero custom resource definition: <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc delete <span class="si">$(</span>oc get crds <span class="nt">-o</span> name | <span class="nb">grep</span> <span class="s1">'velero'</span><span class="si">)</span>
</code></pre>  </div> </div> </li> <li>Migration cluster role: <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc delete <span class="si">$(</span>oc get clusterroles <span class="nt">-o</span> name | <span class="nb">grep</span> <span class="s1">'migration.openshift.io'</span><span class="si">)</span>
</code></pre>  </div> </div> </li> <li>Migration-operator cluster role: <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc delete clusterrole migration-operator
</code></pre>  </div> </div> </li> <li>Velero cluster role: <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc delete <span class="si">$(</span>oc get clusterroles <span class="nt">-o</span> name | <span class="nb">grep</span> <span class="s1">'velero'</span><span class="si">)</span>
</code></pre>  </div> </div> </li> <li>Migration cluster role bindings: <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc delete <span class="si">$(</span>oc get clusterrolebindings <span class="nt">-o</span> name | <span class="nb">grep</span> <span class="s1">'migration.openshift.io'</span><span class="si">)</span>
</code></pre>  </div> </div> </li> <li>Migration-operator cluster role bindings: <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc delete clusterrolebindings migration-operator
</code></pre>  </div> </div> </li> <li>Velero cluster role bindings: <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>oc delete <span class="si">$(</span>oc get clusterrolebindings <span class="nt">-o</span> name | <span class="nb">grep</span> <span class="s1">'velero'</span><span class="si">)</span>
</code></pre>  </div> </div> </li> </ul> </li> </ol> </div> </div> <div class="navigation-bottom d-flex flex-justify-between py-3" role="navigation" aria-label="footer navigation"> <div class="prev"><a href="/openshift-migration-best-practices/04-running-the-migration.html" class="btn" title="Running the migration" accesskey="p" rel="prev"> <i class="fa fa-arrow-circle-left"></i> Previous </a></div> <div class="next"><a href="/openshift-migration-best-practices/06-post-migration-considerations.html" class="btn" title="Postmigration considerations" accesskey="n" rel="next"> Next <i class="fa fa-arrow-circle-right"></i> </a></div> </div><hr> <div class="copyright text-center text-gray" role="contentinfo"> <i class="fa fa-copyright"></i> <span class="time">2020-2021,</span> <a class="text-gray" href="https://github.com/redhat-cop" rel="noreferrer" target="_blank">Red Hat Communities of Practice</a> Revision <a class="text-gray" href="https://github.com/redhat-cop/openshift-migration-best-practices/commit/5c0780b69338e12110ef830cf64ea9376cc6fbec" title="5c0780b69338e12110ef830cf64ea9376cc6fbec" rel="noreferrer" target="_blank">5c0780b</a> <br> <div class="generator"> Built with <a href="https://pages.github.com" rel="noreferrer" target="_blank" title="github-pages v209">GitHub Pages</a> using a <a href="https://github.com/rundocs/jekyll-rtd-theme" rel="noreferrer" target="_blank" title="jekyll-rtd-theme v2.0.10">theme</a> provided by <a href="https://rundocs.io" rel="noreferrer" target="_blank">RunDocs</a>. </div> </div> </div> </div> <div class="addons-wrap d-flex flex-column overflow-y-auto"> <div class="status d-flex flex-justify-between p-2"> <div class="title p-1"> <i class="fa fa-book"></i> OpenShift Migration Best Practices </div> <div class="branch p-1"> <span class="name"> gh-pages </span> <i class="fa fa-caret-down"></i> </div> </div> <div class="addons d-flex flex-column height-full p-2 d-none"> <dl> <dt>GitHub</dt> <dd> <a href="https://github.com/redhat-cop/openshift-migration-best-practices" title="Stars: 67"> <i class="fa fa-github"></i> Homepage </a> </dd> <dd> <a href="https://github.com/redhat-cop/openshift-migration-best-practices/issues" title="Open issues: 3"> <i class="fa fa-question-circle-o"></i> Issues </a> </dd> <dd> <a href="https://github.com/redhat-cop/openshift-migration-best-practices/zipball/gh-pages" title="Size: 4421 Kb"> <i class="fa fa-download"></i> Download </a> </dd> </dl> <hr> <div class="license f6 pb-2"> This <a href="/openshift-migration-best-practices/" title="OpenShift Migration Best Practices">Software</a> is under the terms of <a href="https://github.com/redhat-cop/openshift-migration-best-practices">The Unlicense</a>. </div> </div> </div> <script src="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@2.0.10/assets/js/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@2.0.10/assets/js/theme.min.js"></script> </body> </html>